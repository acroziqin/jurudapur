!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("rome"),require("moment")):"function"==typeof define&&define.amd?define(["rome","moment"],t):e.MaterialDatetimePicker=t(e.rome,e.moment)}(this,function(s,r){"use strict";s="default"in s?s.default:s,r="default"in r?r.default:r;var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}}(),o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],s=!0,n=!1,c=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(i.push(a.value),!t||i.length!==t);s=!0);}catch(e){n=!0,c=e}finally{try{!s&&o.return&&o.return()}finally{if(n)throw c}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(){function e(){n(this,e),this._events={"*":[]}}return t(e,[{key:"trigger",value:function(e,i){var s=this;return e.split(" ").forEach(function(t){s._events["*"].forEach(function(e){return e.fn.call(e.scope,t,i)}),s._events[t]&&s._events[t].forEach(function(e){e.fn.call(e.scope,i)})}),this}},{key:"on",value:function(e,t,i){return this._events[e]||(this._events[e]=[]),this._events[e].push({eventName:e,fn:t,scope:i||this}),this}},{key:"off",value:function(e,t){return this._events[e]&&(t||(this._events[e]=[]),this._events[e]=this._events[e].filter(function(e){return e.fn!==t})),this}},{key:"once",value:function(t,i,s){var n=this;return this.on(t,function e(){i.call(s,t,i,s),n.off(t,e)},s)}}]),e}(),a="c-datepicker",l=function(){return{default:r().startOf("hour"),styles:{scrim:"c-scrim",back:a+"__back",container:a+"__calendar",date:a+"__date",dayBody:a+"__days-body",dayBodyElem:a+"__day-body",dayConcealed:a+"__day--concealed",dayDisabled:a+"__day--disabled",dayHead:a+"__days-head",dayHeadElem:a+"__day-head",dayRow:a+"__days-row",dayTable:a+"__days",month:a+"__month",next:a+"__next",positioned:a+"--fixed",selectedDay:a+"__day--selected",selectedTime:a+"__time--selected",time:a+"__time",timeList:a+"__time-list",timeOption:a+"__time-option",clockNum:a+"__clock__num"},format:"DD/MM/YY",container:document.body,dateValidator:void 0}};function d(e,t){var i=document.createElement("div");return i.innerHTML=t.trim(),e.appendChild(i.firstChild),this}return function(e){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,i);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),t=Object.assign(l().styles,e.styles);return s.options=Object.assign(l(),e),s.options.styles=t,s.on("*",function(e,t){if(s.options.el){var i=new CustomEvent(e,s,t);s.options.el.dispatchEvent(i)}}),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,c),t(i,[{key:"initializeRome",value:function(e,t){var i=this.onChangeDate.bind(this);return s(e,{styles:this.options.styles,time:!1,dateValidator:t,initialValue:this.value}).on("data",i)}},{key:"open",value:function(){var e='\n<div class="'+this.options.styles.scrim+'"></div>\n';d(document.body,e),d(this.options.container,'\n<div class="c-datepicker">\n  <a class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker--show-time js-show-clock" title="show time picker">\n  </a>\n\n  <a class="c-datepicker__toggle c-datepicker__toggle--left c-datepicker--show-calendar is-selected js-show-calendar" title="show date picker">\n  </a>\n\n  <div class="c-datepicker__header">\n    <div class="c-datepicker__header-day">\n      <span class="js-day">Monday</span>\n    </div>\n    <div class="c-datepicker__header-date">\n      <span class="c-datepicker__header-date__month js-date-month"></span>\n      <span class="c-datepicker__header-date__day js-date-day"></span>\n      <span class="c-datepicker__header-date__time js-date-time">\n        <span class="c-datepicker__header-date__hours js-date-hours active">09</span>:<span class="c-datepicker__header-date__minutes js-date-minutes">00</span>\n      </span>\n    </div>\n  </div>\n\n  <div class="c-datepicker__calendar"></div>\n  <div class="c-datepicker__clock">\n    <div class="c-datepicker__clock__am-pm-toggle">\n      <label class="c-datepicker__toggle--checked">\n        <input checked="checked" class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker__clock--am" type="radio" name="time-date-toggle" value="AM" />\n        AM\n      </label>\n\n      <label>\n        <input class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker__clock--pm" type="radio" name="time-date-toggle" value="PM" />\n        PM\n      </label>\n    </div>\n    <div class="c-datepicker__mask"></div>\n    <div class="c-datepicker__clock__hours js-clock-hours active">\n      <div class="c-datepicker__clock__num" data-number="3">3</div>\n      <div class="c-datepicker__clock__num" data-number="4">4</div>\n      <div class="c-datepicker__clock__num" data-number="5">5</div>\n      <div class="c-datepicker__clock__num" data-number="6">6</div>\n      <div class="c-datepicker__clock__num" data-number="7">7</div>\n      <div class="c-datepicker__clock__num" data-number="8">8</div>\n      <div class="c-datepicker__clock__num" data-number="9">9</div>\n      <div class="c-datepicker__clock__num" data-number="10">10</div>\n      <div class="c-datepicker__clock__num" data-number="11">11</div>\n      <div class="c-datepicker__clock__num" data-number="0">12</div>\n      <div class="c-datepicker__clock__num" data-number="1">1</div>\n      <div class="c-datepicker__clock__num" data-number="2">2</div>\n      <div class="c-datepicker__clock-hands">\n        <div class="c-datepicker__hour-hand"></div>\n      </div>\n    </div>\n    <div class="c-datepicker__clock__minutes js-clock-minutes">\n      <div class="c-datepicker__clock__num" data-number="15">15</div>\n      <div class="c-datepicker__clock__num" data-number="20">20</div>\n      <div class="c-datepicker__clock__num" data-number="25">25</div>\n      <div class="c-datepicker__clock__num" data-number="30">30</div>\n      <div class="c-datepicker__clock__num" data-number="35">35</div>\n      <div class="c-datepicker__clock__num" data-number="40">40</div>\n      <div class="c-datepicker__clock__num" data-number="45">45</div>\n      <div class="c-datepicker__clock__num" data-number="50">50</div>\n      <div class="c-datepicker__clock__num" data-number="55">55</div>\n      <div class="c-datepicker__clock__num" data-number="0">0</div>\n      <div class="c-datepicker__clock__num" data-number="5">5</div>\n      <div class="c-datepicker__clock__num" data-number="10">10</div>\n      <div class="c-datepicker__clock-hands">\n        <div class="c-datepicker__hour-hand"></div>\n      </div>\n    </div>\n  </div>\n  <div class="modal-btns">\n    <a class="c-btn c-btn--flat js-cancel">Cancel</a>\n    <a class="c-btn c-btn--flat js-ok">OK</a>\n  </div>\n</div>\n'),this.pickerEl=this.options.container.querySelector("."+a),this.scrimEl=document.body.querySelector("."+this.options.styles.scrim),this.amToggleEl=this.$(".c-datepicker__clock--am"),this.pmToggleEl=this.$(".c-datepicker__clock--pm"),this.value?(this.setDate(this.value),this.setTime(this.value)):(this.value=r(0),this.setDate(this.options.default),this.setTime(this.options.default)),this.initializeRome(this.$("."+this.options.styles.container),this.options.dateValidator),this._listenForCloseEvents(),this._show()}},{key:"close",value:function(){this._stopListeningForCloseEvents(),this._hide()}},{key:"_hide",value:function(){var e=this;return this.pickerEl.classList.remove("open"),window.setTimeout(function(){e.options.container.removeChild(e.pickerEl),document.body.removeChild(e.scrimEl),e.trigger("close")},200),this}},{key:"_show",value:function(){var e=this;return this.delegateEvents(),window.requestAnimationFrame(function(){e.scrimEl.classList.add(e.options.styles.scrim+"--shown"),e.pickerEl.classList.add(a+"--open"),e.trigger("open")}),this}},{key:"_listenForCloseEvents",value:function(){var t=this;this._onWindowKeypress=function(e){27===e.which&&t.close()},window.addEventListener("keydown",this._onWindowKeypress)}},{key:"_stopListeningForCloseEvents",value:function(){window.removeEventListener("keydown",this._onWindowKeypress),this._closeHandler=null}},{key:"delegateEvents",value:function(){var t=this;return this.$(".js-cancel").addEventListener("click",function(){return t.clickCancel()},!1),this.$(".js-ok").addEventListener("click",function(){return t.clickSubmit()},!1),this.$(".js-date-hours").addEventListener("click",function(e){return t.showHourClock(e)},!1),this.$(".js-date-minutes").addEventListener("click",function(e){return t.showMinuteClock(e)},!1),this.$(".js-clock-hours").addEventListener("mouseleave",function(e){return t.mouseOutHourClock(e)},!1),this.$(".js-clock-hours ."+this.options.styles.clockNum).forEach(function(e){e.addEventListener("click",function(e){return t.clickClickHour(e).showMinuteClock()},!1),e.addEventListener("mouseenter",function(e){return t.mouseInHourClock(e)},!1)}),this.$(".js-clock-minutes").addEventListener("mouseleave",function(e){return t.mouseOutMinuteClock(e)},!1),this.$(".js-clock-minutes ."+this.options.styles.clockNum).forEach(function(e){e.addEventListener("click",function(e){return t.clickClockMinute(e)},!1),e.addEventListener("mouseenter",function(e){return t.mouseInMinuteClock(e)},!1)}),this.$(".c-datepicker__clock--am").addEventListener("click",function(e){return t.clickAm(e)},!1),this.$(".c-datepicker__clock--pm").addEventListener("click",function(e){return t.clickPm(e)},!1),this.$(".js-show-calendar").addEventListener("click",function(e){return t.clickShowCalendar(e)},!1),this.$(".js-date-day").addEventListener("click",function(e){return t.clickShowCalendar(e)},!1),this.$(".js-date-month").addEventListener("click",function(e){return t.clickShowCalendar(e)},!1),this.$(".js-show-clock").addEventListener("click",function(e){return t.clickShowClock(e)},!1),this.scrimEl.addEventListener("click",function(){return t.close()},!1),this}},{key:"clickSubmit",value:function(){return this.close(),this.trigger("submit",this.value,this),this}},{key:"clickCancel",value:function(){return this.close(),this.trigger("cancel",this.value,this),this}},{key:"clickClickHour",value:function(e){var t=r(this.value),i=parseInt(e.currentTarget.getAttribute("data-number"),10);return 0===i&&"pm"===this.meridiem?i=12:"pm"===this.meridiem&&(i+=12),t.hour(i),this.set(t),this}},{key:"clickClockMinute",value:function(e){var t=r(this.value),i=parseInt(e.currentTarget.getAttribute("data-number"),10);return t.minute(i),this.set(t),this}},{key:"onChangeDate",value:function(e){var t=r(this.value),i=e.split("-"),s=o(i,3),n=s[0],c=s[1],a=s[2];return t.set({year:n,month:c-1,date:a}),this.set(t),this}},{key:"mouseInHourClock",value:function(){var e=this.$(".js-clock-hours ."+this.options.styles.clockNum+"--active");e&&e.classList.add("hide-hand")}},{key:"mouseInMinuteClock",value:function(){var e=this.$(".js-clock-minutes ."+this.options.styles.clockNum+"--active");e&&e.classList.add("hide-hand")}},{key:"mouseOutHourClock",value:function(){var e=this.$(".js-clock-hours ."+this.options.styles.clockNum+"--active.hide-hand");e&&e.classList.remove("hide-hand")}},{key:"mouseOutMinuteClock",value:function(){var e=this.$(".js-clock-minutes ."+this.options.styles.clockNum+"--active.hide-hand");e&&e.classList.remove("hide-hand")}},{key:"clickAm",value:function(){var e=r(this.value);return"pm"===this.meridiem&&(this.meridiem="am",e.hour(e.hour()-12)),this.set(e),this}},{key:"clickPm",value:function(){var e=r(this.value);return"am"===this.meridiem&&(this.meridiem="pm",e.hour(e.hour()+12)),this.set(e),this}},{key:"showHourClock",value:function(){this.clickShowClock(),this.$(".js-clock-hours").classList.add("active"),this.$(".js-clock-minutes").classList.remove("active"),this.$(".js-date-hours").classList.add("active"),this.$(".js-date-minutes").classList.remove("active")}},{key:"showMinuteClock",value:function(){this.clickShowClock(),this.$(".js-clock-hours").classList.remove("active"),this.$(".js-clock-minutes").classList.add("active"),this.$(".js-date-hours").classList.remove("active"),this.$(".js-date-minutes").classList.add("active")}},{key:"clickShowCalendar",value:function(){this.$(".js-show-calendar").classList.add("is-selected"),this.$(".js-show-clock").classList.remove("is-selected")}},{key:"clickShowClock",value:function(){this.$(".js-show-clock").classList.add("is-selected"),this.$(".js-show-calendar").classList.remove("is-selected")}},{key:"data",value:function(e){return console.warn("MaterialDatetimePicker#data is deprecated and will be removed in a future release. Please use get or set."),e?this.set(e):this.value}},{key:"get",value:function(){return r(this.value)}},{key:"set",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).silent,i=void 0!==t&&t,s=r(e),n=[];s.date()===this.value.date()&&s.month()===this.value.month()&&s.year()===this.value.year()||(this.setDate(s),n.push("change:date")),s.hour()===this.value.hour()&&s.minutes()===this.value.minutes()||(this.setTime(s),n.push("change:time")),this.options.el&&("INPUT"===this.options.el.tagName?this.options.el.value=s.format(this.options.format):this.options.el.setAttribute("data-value",s.format(this.options.format))),0<n.length&&!i&&this.trigger(["change"].concat(n).join(" "),this.value,this)}},{key:"setDate",value:function(e){var t=r(e),i=t.format("MMM"),s=t.format("Do"),n=t.format("dddd"),c=t.format("YYYY");return this.$(".js-day").innerText=n,this.$(".js-date-month").innerText=i+" "+c,this.$(".js-date-day").innerText=s,this.value.year(t.year()),this.value.month(t.month()),this.value.date(t.date()),this}},{key:"setTime",value:function(e){var t=r(e),i=5*Math.round(parseInt(t.format("mm"),10)/5);t.minutes(i);var s=t.format("HH"),n=t.format("mm"),c=parseInt(s,10)%12,a=this.$(".js-clock-hours ."+this.options.styles.clockNum+"--active"),o=this.$(".js-clock-minutes ."+this.options.styles.clockNum+"--active");return this.$(".js-date-hours").innerText=s,this.$(".js-date-minutes").innerText=n,a&&a.classList.remove(this.options.styles.clockNum+"--active"),o&&o.classList.remove(this.options.styles.clockNum+"--active"),this.$(".js-clock-hours ."+this.options.styles.clockNum+'[data-number="'+c+'"]').classList.add(this.options.styles.clockNum+"--active"),this.$(".js-clock-minutes ."+this.options.styles.clockNum+'[data-number="'+i+'"]').classList.add(this.options.styles.clockNum+"--active"),this.value.hours(t.hours()),this.value.minutes(t.minutes()),this.meridiem=this.value.format("a"),"pm"===this.meridiem?(this.amToggleEl.removeAttribute("checked"),this.pmToggleEl.setAttribute("checked","checked"),this.amToggleEl.parentElement.classList.remove("c-datepicker__toggle--checked"),this.pmToggleEl.parentElement.classList.add("c-datepicker__toggle--checked")):(this.pmToggleEl.removeAttribute("checked"),this.amToggleEl.setAttribute("checked","checked"),this.pmToggleEl.parentElement.classList.remove("c-datepicker__toggle--checked"),this.amToggleEl.parentElement.classList.add("c-datepicker__toggle--checked")),this}},{key:"$",value:function(e){var t=this.pickerEl.querySelectorAll(e);return 1<t.length?[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t)):t[0]}}]),i}()});